extends ./layout.jade

block meta
block link
block title
block navbar-header
block subnavbar-header

block content
  div(class="main")
    div(class="main-inner")
      div(class="container")
        div(class="row")
          div(class="span12")
            div(class="widget widget-nopad")
              div(class="widget-header")
                i(class="icon-list-alt")
                h3 Registro de backlog
              div(class="widget-content")
                div(style="padding: 15px;")
                  form(ng-submit="saveUserHistory('#{idProy}')")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.narrativa" name="narrativa" id="narrativa" placeholder="Narrativa")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.tiempoEstimado" name="tiempoEstimado" id="tiempoEstimado" placeholder="Tiempo estimado")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.prioridad" name="prioridad" id="prioridad" placeholder="Prioridad")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.estado" name="estado" id="estado" placeholder="Estado")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.creadorTarjeta" name="creadorTarjeta" id="creadorTarjeta" placeholder="Creador tarjeta")
                    div
                      input(type="submit" value="Aceptar" class="btn btn-info")
                    div(class="alert" style="margin-top: 10px;" ng-show="!userHistorys.length")
                      button(type="button" class="close" data-dismiss="alert") ×
                      | No hay historias de usuario
                    div(class="widget widget-table action-table" style="margin-top: 10px;")
                      div(class="widget-header")
                        i(class="icon-th-list")
                        h3 Historia de usuario
                      div(class="widget-content")
                        table(class="table table-striped table-bordered")
                          thead
                            tr
                              th Narrativa
                              th Tiempo estimado
                              th Prioridad
                              th Acciones
                              th Estado
                              th Creador tarjeta
                          tbody
                            tr(ng-repeat="item in historias")
                              td {{item.narrativa}}
                              td {{item.tiempoEstimado}}
                              td {{item.prioridad}}
                              td {{item.estado}}
                              td {{item.creadorTarjeta}}
                              td
                                a(href="#editarHistoria" role="button" class="btn" data-toggle="modal" ng-click="showEditbacklog($index)")
                                  i(class="btn-icon-only icon-edit")

  div(id="editarHistoria" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")
    div(class="modal-header")
      button(type="button" class="close" data-dismiss="modal" aria-hidden="true") ×
      h3 Editar historia de usuario
    div(class="modal-body")
      form()
        div(class="form-group")
          label Narrativa:
          input(type="text" class="form-control span4" ng-model="historyToEdit.narrativa" name="narrativa" id="narrativa" placeholder="Narrativa")
        div(class="form-group")
          label Tiempo estimado:
          input(type="text" class="form-control span4" ng-model="historyToEdit.tiempoEstimado" name="tiempo" id="tiempo" placeholder="Tiempo estimado")
        div(class="form-group")
          label Prioridad:
          input(type="text" class="form-control span4" ng-model="historyToEdit.prioridad" name="prioridad" id="prioridad" placeholder="Prioridad")
        div(class="form-group")
          label Estado:
          input(type="text" class="form-control span4" ng-model="historyToEdit.estado" name="estado" id="estado" placeholder="Estado")
        div(class="form-group")
          label Creador de tarjeta:
          input(type="text" class="form-control span4" ng-model="historyToEdit.creadorTarjeta" name="creador" id="creador" placeholder="Creador tarjeta")

        div(class="modal-footer")
          button(class="btn" data-dismiss="modal" aria-hidden="true") Cerrar
          button(class="btn btn-primary" ng-click="editbacklog()" data-dismiss="modal" aria-hidden="true") Guardar

block footer
block script
