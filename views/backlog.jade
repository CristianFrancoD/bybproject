extends ./layout.jade

block meta
block link
block title
block navbar-header
block subnavbar-header

block content
  div(class="main")
    div(class="main-inner")
      div(class="container")
        div(class="row")
          div(class="span12")
            div(class="widget widget-nopad")
              div(class="widget-header")
                i(class="icon-list-alt")
                h3 Registro de backlog
              div(class="widget-content")
                div(style="padding: 15px;")
                  form(ng-submit="saveUserHistory('#{idProy}')")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.narrativa" name="narrativa" id="narrativa" placeholder="Narrativa")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.como" name="como" id="como" placeholder="Como")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.detalmanera" name="detalmanera" id="detalmanera" placeholder="De tal manera")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.quiero" name="quiero" id="quiero" placeholder="Quiero")
                    div(class="form-group")
                      input(type="text" class="form-control span4" ng-model="userHistory.creadorTarjeta" name="creadorTarjeta" id="creadorTarjeta" placeholder="Creador tarjeta")
                    div
                      input(type="submit" value="Aceptar" class="btn btn-info")
                    div(class="alert" style="margin-top: 10px;" ng-show="!userHistorys.length")
                      button(type="button" class="close" data-dismiss="alert") ×
                      | No hay historias de usuario
                    // Post-it's de proyectos.
                    style.
                      .ul-li-a {
                        border: 1px solid #BDBDBD;
                        text-decoration:none;
                        color: #000;
                        background: #ffc;
                        display: block;
                        width: 28%;
                        padding: 1em;
                        box-shadow: 10px 10px 5px #a4a4a4;
                       }
                    div(class="widget widget-table action-table" style="margin-top: 10px;")
                      div(class="widget-header")
                        i(class="icon-th-list")
                        h3 Historias de usuario
                      div(class="widget-content" style="padding: 20px;")
                        //ul(style="list-style:none; overflow: hidden; padding: 1em; margin: 1em; float: left;" class="ul-li-a" ng-repeat="item in historias")
                        //  li(sytle="list-style:none; margin: 1em; float: left")
                        //    h2 {{item.narrativa}}
                        //    p Como: {{item.como}}
                        //    p De tal manera: {{item.detalmanera}}
                        //    p Quiero: {{item.quiero}}
                        //    p Creador {{item.creadorTarjeta}}
                        //    if hayProductOwner 
                        //      a(href="#aceptarHistoria" role="button" class="btn")
                        //        i(class="btn-icon-only icon-ok-sign")
                        //      a(href="#rechazarHistoria" role="button" class="btn")
                        //        i(class="btn-icon-only icon-remove")  
                        //    a(href="#editarHistoria" role="button" class="btn" data-toggle="modal" ng-click="showEditbacklog($index)")
                        //      i(class="btn-icon-only icon-edit")
                        // Termina post-it's.
                        div(class="flip-container" ntouchstart="this.classList.toggle('hover');" ng-repeat="item in historias")
                          a(href="#editarHistoria" role="button" class="btn" data-toggle="modal" ng-click="showEditbacklog($index)")
                            i(class="btn-icon-only icon-edit")      
                          div(class="flipper")
                            div(class="front")
                              ul(style="list-style:none; overflow: hidden; padding: 1em; margin: 1em; float: left;")
                                li(sytle="list-style:none; margin: 1em; float: left;")
                                  h2 {{item.narrativa}}
                                  p Como: {{item.como}}
                                  p De tal manera: {{item.detalmanera}}
                                  p Quiero: {{item.quiero}}
                                  p Creador {{item.creadorTarjeta}}
                                  if hayProductOwner 
                                    a(href="#aceptarHistoria" role="button" class="btn")
                                      i(class="btn-icon-only icon-ok-sign")
                                    a(href="#rechazarHistoria" role="button" class="btn")
                                      i(class="btn-icon-only icon-remove")  
                            div(class="back")
                              h1 adios
                            
                        // Test de flip-cards.
                        //section(class="containerBC" style="display: block")
                        //  div(id="card")
                        //    figure(class="front" ng-repeat="item in historias") 
                        //      h2 {{item.narrativa}}
                        //    figure(class="back") 
                        //      h2 felicidad
                  
                        //section(id="optionsBC" style="position: relative; z-index: 100; margin-bottom: 40px;")
                        //  button(id="flip") Flip Card
                    
                    //div(class="widget widget-table action-table" style="margin-top: 10px;")
                    //  div(class="widget-header")
                    //    i(class="icon-th-list")
                    //  div(class="widget-content")
                    //    table(class="table table-striped table-bordered")
                    //      thead
                    //        tr
                    //          th Narrativa
                    //          th Tiempo estimado
                    //          th Prioridad
                    //          th Acciones
                    //          th Estado
                    //          th Creador tarjeta
                    //      tbody
                    //        tr(ng-repeat="item in historias")
                    //          td {{item.narrativa}}
                    //          td {{item.tiempoEstimado}}
                    //          td {{item.prioridad}}
                    //          td {{item.estado}}
                    //          td {{item.creadorTarjeta}}
                    //          td
                    //            a(href="#editarHistoria" role="button" class="btn" data-toggle="modal" ng-click="showEditbacklog($index)")
                    //              i(class="btn-icon-only icon-edit")

  div(id="editarHistoria" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")
    div(class="modal-header")
      button(type="button" class="close" data-dismiss="modal" aria-hidden="true") ×
      h3 Editar historia de usuario
    div(class="modal-body")
      form()
        div(class="form-group")
          label Narrativa:
          input(type="text" class="form-control span4" ng-model="historyToEdit.narrativa" name="narrativa" id="narrativa" placeholder="Narrativa")
        div(class="form-group")
          label Como:
          input(type="text" class="form-control span4" ng-model="historyToEdit.como" name="como" id="como" placeholder="Como")
        div(class="form-group")
          label De tal manera:
          input(type="text" class="form-control span4" ng-model="historyToEdit.detalmanera" name="detalmanera" id="detalmanera" placeholder="De tal manera")
        div(class="form-group")
          label Quiero:
          input(type="text" class="form-control span4" ng-model="historyToEdit.quiero" name="quiero" id="quiero" placeholder="Quiero")
        div(class="form-group")
          label Creador de tarjeta:
          input(type="text" class="form-control span4" ng-model="historyToEdit.creadorTarjeta" name="creador" id="creador" placeholder="Creador tarjeta")

        div(class="modal-footer")
          button(class="btn" data-dismiss="modal" aria-hidden="true") Cerrar
          button(class="btn btn-primary" ng-click="editbacklog()" data-dismiss="modal" aria-hidden="true") Guardar
  br
  script.
    document.getElementById("newproject").style.visibility = "hidden";

block footer
block script
